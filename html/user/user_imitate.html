<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>用户模拟考试列表</title>
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.css">
    <link href="../../css/bootstrap-theme.css" rel="stylesheet">
    <script src="../../js/jquery.js"></script>
    <script src="../../js/bootstrap.js"></script>
    <script src="../../js/public.js"></script>
    <script src="../../bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.js"></script>
    <script src="../../bootstrap-datetimepicker-master/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <link  href="../../bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.css" rel="stylesheet" media="screen">
    <script src="../../bootstraptable/bootstrap-table.js"></script>
    <script src="../../bootstraptable/bootstrap-table-zh-CN.js"></script>
    <style>
        form .form-group{
            margin-top: 10px;
        }
    </style>
</head>
<body>
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">当前位置：题库管理>用户模拟考试列表</h3>
    </div>
    <div class="panel-body">
        <div class="row search_Div">
            <form class="form-inline" id="form" enctype="multipart/form-data" method="post">
                 <div class="form-group col-xs-3">
                    <label>用户姓名：</label>
                    <input type="text" id="user_name" class="form-control">
                 </div>
                 <div class="form-group col-xs-3">
                    <label>模考名称：</label>
                    <input type="text" id="imitate_name" class="form-control">
                </div>
                <div class="form-group col-xs-3">
                    <label>报名时间：</label>
                    <input id="join_time" type="text" class="form-control datetime" />
                  </div>
                  <div class="form-group col-xs-3">
                    <label>科目：</label>
                    <select id="subject_id" class="form-control">
                    </select>
                </div>
                <div class="form-group col-xs-3">
                  <label>收费状态：</label>
                  <select id="price_type" class="form-control">
                      <option value="-1">全部</option>
                      <option value="0">收费</option>
                      <option value="1">免费</option>
                  </select>
                </div>
                <div class="form-group col-xs-3">
                    <label>收费金额：</label>
                    <input id="price_start" type="text" class="form-control"></input>
                  </div>
                  <div class="form-group col-xs-3">
                    <label>至：</label>
                    <input id="price_end" type="text" class="form-control"></input>
                </div>

                <div class="form-group col-xs-1 col-md-offset-1" style="padding: 10px 0;">
                    <button type="button" class="btn btn-primary" id="submitBtn" onclick="search()">查询</button>
                </div>
            </form>
        </div>
        <br><br>
        <table class="table" id="table">
        </table>
    </div>
</div>
</body>
</html>
<script>
  $(function(){
    $("#subject_id").append("<option value='-1'>请选择</option>"+get_sub());
  })
  function dataList() {
      $('#table').bootstrapTable({
          //请求方法
          method: 'get',
          striped: true,
          cache: false,
          pagination: true,
          sortable: false,
          sortOrder: "asc",
          //pageNumber:1,
          pageSize: 5,
          pageList: [5, 25, 50],
          url: "http://192.168.0.170:15000/yc-crm/user/imitate/search",
          queryParams: function(params) {
              var paramObj = {
                  user_name : $("#user_name").val(),
                  imitate_name : $("#imitate_name").val(),
                  join_time : $("#join_time").val(),
                  subject_id : $("#subject_id").val(),
                  price_type : $("#pub_flag").val(),
                  price_type : $("#price_type").val(),
                  price_start : $("#price_start").val(),
                  price_end : $("#price_end").val(),
                  plat : "0"
              };
              params.param = JSON.stringify(paramObj);
              return params;
          },
          sidePagination: "server",
          search: false,
          strictSearch: false,
          idField: "id",
          columns: [{
              field: 'user_name',
              title: '用户名称',
              align: 'center'
              },
              {
                  field: 'nick_name',
                  title: '用户昵称',
                  align: 'center'
                  },
              {
                  field: 'join_time',
                  title: '报名时间',
                  align: 'center'
              },
              {
                  field: 'subject_name',
                  title: '科目名称',
                  align: 'center'
              },
              {
                  field: 'exam_imitate_name',
                  title: '模考名称',
                  align: 'center'
              },
              {
                  field: 'exam_imitate_price',
                  title: '收费状态',
                  align: 'center',
                  formatter:function(value, row, index){
                      return value>0?"收费":"免费";
                  }
              },
              {
                  field: 'exam_imitate_price',
                  title: '收费金额',
                  align: 'center'
              }],
          pagination: true
      });
        $('#table').bootstrapTable('refresh');
  }
  function search(){
     dataList();
  }

</script>
