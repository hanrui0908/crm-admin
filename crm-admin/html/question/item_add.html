<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../../css/easyui-themes.css">
    <!--<link rel="stylesheet" type="text/css" href="../../css/yc.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="../../css/icon.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="../../css/layout-1.css"/>-->
    <script src="../../js/jquery.js"></script>
    <script src="../../js/jquery.easyui.min.js"></script>
    <script src="../../ueditor/ueditor.config.js"></script>
    <script src="../../ueditor/ueditor.all.js"></script>
    <script src="../../ueditor/ueditor.parse.js"></script>
    <script src="../../ueditor/kityformula-plugin/addKityFormulaDialog.js"></script>
    <script src="../../ueditor/kityformula-plugin/getKfContent.js"></script>
    <script src="../../ueditor/kityformula-plugin/defaultFilterFix.js"></script>
    <script src="../../js/public.js"></script>
    <script>
        $(function (){
            $("#year").html(get_year());
        })
        //item_add_submit();

    </script>
    <style>
        .btn_121_addBtn{
            border:1px solid #D3D3D3;
            height: 30px;
            line-height: 30px;
            text-align: center;
            display: inline-block;
            padding: 0 10px;
        }
        .xx_121_content{
            border:1px solid #D3D3D3;
            min-height: 30px;
            font-size: 14px;
            line-height: 25px;
            word-break: break-all;
            work-wrap: break-word;
        }
        .xx_121_content p{
            font-size: 16px;
            line-height: 25px;
        }
        .subjectForm>table{
            display: none;
        }
        .subjectForm>table#sxdxOrzzdx{
            display: inline-table;
        }
        .edui-default .edui-editor {
            border: none;
            border-radius: 0;
        }
        .answerInput{
            line-height: 20px;
            border: 1px solid #d3d3d3;
        }
    </style>
</head>
<body>
<div class="easyui-layout" data-options="fit:true">
    <div class="easyui-panel" title="当前位置：题库管理 > 基础题库 > 新建" data-options="fit:true">
        <div style="padding:10px 60px 20px 60px">
            <form id="ff" method="post">

                <table cellpadding="5" border="0" width="1000">
                    <tr>
                        <td align="right" width="20%">科目：</td>
                        <td width="30%">
                            <select class="easyui-combobox" id="subjectName" style="width: 200px;" data-options="editable:false, panelHeight:'auto'">
                                <option value="1">数学</option>
                                <option value="2">政治</option>
                                <option value="3">英语</option>
                            </select>
                        </td>
                        <td align="right" width="20%">题目来源：</td>
                        <td width="30%"><input class="easyui-textbox" style="width: 200px;" id="subjectForm" type="text" name="name" data-options="required:true" placeholder="请输入题目的来源"></input></td>

                    </tr>
                    <tr>
                        <td align="right">星级：</td>
                        <td>
                            <input class="easyui-textbox" style="width: 200px;" type="text" id="stars"/>
                        </td>
                        <td align="right">状态：</td>
                        <td>
                            <select class="easyui-combobox" style="width: 200px;" id="statu" style="width: 200px;" data-options="editable:false, panelHeight:'auto'">
                                <option value="0">全部</option>
                                <option value="1">启用</option>
                                <option value="2">停用</option>
                            </select>

                        </td>

                    </tr>
                    <tr>
                        <td align="right">题目类型：</td>
                        <td>
                            <select id="subjectType" style="width: 200px;">
                                <option value="1">单选题</option>
                                <option value="2">填空题</option>
                                <option value="3">解答题</option>
                                <option value="13">证明题</option>
                            </select>
                        </td>
                        <td align="right">年份：</td>
                        <td>
<!--
                            <select class="easyui-combobox" id="year" style="width: 200px;"></select>
-->
                            <select id="year" style="width: 200px;"></select>

                        </td>

                    </tr>
                    <tr>
                        <td align="right">题干：</td>
                        <td colspan="3">
                            <div class="xx_121_content" style="width: 700px;"><script id="editor" style="height: 200px; width: 700px;" type="text/plain"></script></div>
                        </td>

                    </tr>
                </table>
                <div class="subjectForm">
                    <table id="sxdxOrzzdx" cellpadding="5" border="0" width="1000"><!--数学单选-->
                        <tr>
                            <td align="right" width="20%">选项：</td>
                            <td width="80%"></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <table id="sxdxcontents" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="opentAll">
                                    <tr>
                                        <td align="right">A：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td align="right">B：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td align="right">C：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td align="right">D：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <a href="javascript:void(0)" class="btn_121_addBtn addOption">添加选项</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">答案：</td>
                            <td>
                                <input id="sxanswer" class="answerInput" onkeyup="this.value=this.value.toUpperCase()" maxlength="1" />
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td class="sxdxjx">
                                <div style="width:700px;" class="xx_121_content"></div>
                            </td>
                        </tr>
                    </table>

                    <table id="sxtk" border="0" width="1000"><!--数学填空-->
                        <tr>
                            <td align="right" width="20%">答案：</td>
                            <td>
                                <div style="width:700px;" class="xx_121_content answer"></div>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td class="sxtkjx">
                                <div style="width:700px;" class="xx_121_content analysis"></div>
                            </td>
                        </tr>

                    </table>
                    <table id="sxjd" border="0" width="1000"><!--数学解答题-->
                        <tr>
                            <td align="right" width="20%">解析：</td>
                            <td width="80%">
                                <div style="width:700px;" class="xx_121_content analysis"></div>
                            </td>
                        </tr>

                    </table>
                    <table id="zzdx" border="0" width="1000"><!--政治多选-->
                        <tr>
                            <td align="right" width="20%">选项：</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <table id="zzdxcontents" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="opentAll">
                                    <tr>
                                        <td align="right">A：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td align="right">B：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td align="right">C：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td align="right">D：</td>
                                        <td><div class="xx_121_content option"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <a href="javascript:void(0)" class="btn_121_addBtn addOption">添加选项</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">答案：</td>
                            <td>
                                <input id="zzdxanswer"class="answerInput" onkeyup="this.value=this.value.toUpperCase()" />
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td class="zzany">
                                <div style="width:700px;" class="xx_121_content"></div>
                            </td>
                        </tr>
                    </table>
                    <table id="zzcl" border="0" width="1000"><!--政治材料题目-->
                        <tr>
                            <td align="right" width="20%">问题：</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <table border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="opentAll">
                                    <tr>
                                        <td align="right">（1）：</td>
                                        <td><div class="xx_121_content question"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <a href="javascript:void(0)" class="btn_121_addBtn addPolQuestion">添加问题</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">答案：</td>
                            <td>
                                <table id="zxcldn" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="opentAll">
                                    <tr>
                                        <td align="right">（1）：</td>
                                        <td><div class="xx_121_content answer"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <a href="javascript:void(0)" class="btn_121_addBtn addPolOption">添加答案</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td class="zzany">
                                <div style="width:700px;" class="xx_121_content" id="analysis"></div>
                            </td>
                        </tr>
                    </table>
                    <table id="yywx" border="0" width="1000"><!--英语完型-->
                        <tr>
                            <td align="right" width="20%">问题：</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <table  id="yywxwt0" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="answerAll">
                                    <tr class="yywxwt0">
                                        <td align="right" width="10%">（1）：</td>
                                        <td class="yywxwt1">
                                            <table class="yywxwt2" border="0" cellspacing="" cellpadding="5" width="100%">
                                                <tbody class="opentAll">
                                                <tr>
                                                    <td align="right" width="10%">A：</td>
                                                    <td><div class="xx_121_content option"></div></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td>
                                                        <a href="javascript:void(0)" class="btn_121_addBtn addEnglishOption">添加选项</a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="right">答案：</td>
                                                    <td><input class="answerInput" onkeyup="this.value=this.value.toUpperCase()" maxlength="1" /></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <a href="javascript:void(0)" class="btn_121_addBtn addAnswerGroup">添加问题组</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td>
                                <table class="yywxjx" border="0" cellpadding="5" width="100%">
                                    <tbody class="analysistr">
                                    <tr>
                                        <td width="10%" align="right">
                                            （1）：
                                        </td>
                                        <td>
                                            <div style="width:700px;" class="xx_121_content analysis"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><a href="javascript:void(0)" class="btn_121_addBtn addAnalysis">添加解析</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table id="yyyd" border="0" width="1000"><!--英语阅读-->
                        <tr>
                            <td align="right" width="20%">问题：</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <table class="yyyd_out" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="readAll">
                                    <tr>
                                        <td align="right" width="10%">（1）：</td>
                                        <td class="yyyd_xx_outer"><div class="xx_121_content question"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <table  border="0" cellspacing="" cellpadding="5" width="100%">
                                                <tbody class="opentAll">
                                                <tr>
                                                    <td align="right" width="10%">A：</td>
                                                    <td class="yyyd_xx_inner"><div class="xx_121_content option"></div></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td>
                                                        <a href="javascript:void(0)" class="btn_121_addBtn addEnglishOptiony">添加选项</a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="right">答案：</td>
                                                    <td class="yyyd_answer"><input class="answerInput" onkeyup="this.value=this.value.toUpperCase()" maxlength="1" /></td>
                                                </tr>
                                                <tr>
                                                    <td align="right">解析：</td>
                                                    <td><div class="xx_121_content analysis"></div></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <a href="javascript:void(0)" class="btn_121_addBtn addReadGroup">添加问题</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table id="yyqxw" border="0" width="1000"><!--英语7选5-->
                        <tr>
                            <td align="right" width="20%">答案：</td>
                            <td>
                                <table id="yy_7_xx" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="answerAll">
                                    <tr>
                                        <td align="right" width="10%">（1）：</td>
                                        <td width="90%"><div class="xx_121_content answer"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><a href="javascript:void(0)" class="btn_121_addBtn addAnswer">添加答案</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td>
                                <table   id="yy_7_jx" border="0" cellpadding="5" width="100%">
                                    <tbody class="analysistr">
                                    <tr>
                                        <td width="10%" align="right">
                                            （1）：
                                        </td>
                                        <td>
                                            <div style="width:700px;" class="xx_121_content analysis"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><a href="javascript:void(0)" class="btn_121_addBtn addAnalysis">添加解析</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table id="yyfy" border="0" width="1000"><!--英语翻译-->
                        <tr>
                            <td align="right" width="20%">答案：</td>
                            <td>
                                <table id= "yxfx_xx" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="answerAll">
                                    <tr>
                                        <td align="right" width="10%">（1）：</td>
                                        <td width="90%"><div class="xx_121_content answer"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><a href="javascript:void(0)" class="btn_121_addBtn addAnswer">添加答案</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td>
                                <table id="yxfx_jx" border="0" cellpadding="5" width="100%">
                                    <tbody class="analysistr">
                                    <tr>
                                        <td width="10%" align="right">
                                            （1）：
                                        </td>
                                        <td>
                                            <div style="width:700px;" class="xx_121_content analysis"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><a href="javascript:void(0)" class="btn_121_addBtn addAnalysis">添加解析</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table id="yypx" border="0" width="1000"><!--英语排序-->
                        <tr>
                            <td align="right" width="20%">答案：</td>
                            <td>
                                <table id="yypx_xx" border="0" cellspacing="" cellpadding="5" width="100%">
                                    <tbody class="answerAll">
                                    <tr>
                                        <td align="right" width="10%">（1）：</td>
                                        <td width="90%"><div class="xx_121_content answer"></div></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><a href="javascript:void(0)" class="btn_121_addBtn addAnswer">添加答案</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">解析：</td>
                            <td>
                                <table id="yypx_jx" border="0" cellpadding="5" width="100%">
                                    <tbody class="analysistr">
                                    <tr>
                                        <td width="10%" align="right">
                                            （1）：
                                        </td>
                                        <td>
                                            <div style="width:700px;" class="xx_121_content analysis"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><a href="javascript:void(0)" class="btn_121_addBtn addAnalysis">添加解析</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table id="yyzw" border="0" width="1000"><!--英语作文-->
                        <tr>
                            <td align="right" width="20%">范文：</td>
                            <td width="80%"><div class="xx_121_content composition"></div></td>
                        </tr>
                    </table>
                </div>
                <div class="form-group col-xs-3 col-md-offset-9">
                    <button type="button" class="btn btn-primary" id="submitBtn" onclick="item_add_submit()">添加</button>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>
<script>
    UE.delEditor('editor');
    var ue = UE.getEditor('editor',{
    toolbars:[['FullScreen', 'Source', 'Undo', 'Redo','bold','underline','italic','test','insertimage','justifyleft','justifycenter','justifyright','justifyjustify','fontsize','kityformula']],
    //focus时自动清空初始化时的内容
    //              autoClearinitialContent:true,
    //关闭字数统计
    wordCount:false,
    //关闭elementPath
    //              elementPathEnabled:false,
    enableAutoSave: false
    });

    ue.ready(function(){
    //阻止工具栏的点击向上冒泡
    $(this.container).click(function(e){
    e.stopPropagation()
    })
    });
    //$('.xx_121_content').click(function(e){
    $('body').on("click",".xx_121_content",function(e){
    var $target = $(this);
    var content = $target.html();
    var currentParnet = ue.container.parentNode.parentNode;
    var currentContent = ue.getContent();
    $target.html('');
    $target.append(ue.container.parentNode);
    ue.reset();
    setTimeout(function(){
    ue.setContent(content);
    },200)
    $(currentParnet).html(currentContent);
    })


    /////////////////////////////////
    $("#subjectName").combobox({
    onChange:function(n,o){
    var value = n;
    var data, json;
    if(value == 1){//数学科目
    json = '[{"id":"1","text":"单选题","selected":true},{"id":"2","text":"填空题"},{"id":"3","text":"解答题"},{"id":"13","text":"证明题"}]';
    data = $.parseJSON(json);
    }
    if(value == 2){//政治科目
    json = '[{"id":"1","text":"单选题","selected":true},{"id":"4","text":"多选题"},{"id":"5","text":"材料题"}]';
    data = $.parseJSON(json);
    }
    if(value == 3){//英语科目
    json = '[{"id":"1","text":"单选题","selected":true},{"id":"6","text":"完型"},{"id":"7","text":"阅读题"},{"id":"8","text":"7选5"},{"id":"9","text":"翻译题"},{"id":"10","text":"排序题"},{"id":"11","text":"小作文"},{"id":"12","text":"大作文"}]';
    data = $.parseJSON(json);
    }
    /////////////////////////////////
    $("#subjectType").combobox("loadData", data);//填充题目类型
    var subjecttype = $("#subjectType").combobox('getValue');//科目
    subfn(value,subjecttype)
    }
    });
    $("#subjectType").combobox({
    onChange:function(n,o){
    var subjectid = $("#subjectName").combobox('getValue');//科目
    var subjecttype = n;//题目类型
    subfn(subjectid,subjecttype)
    }
    });
    var subfn = function(subjectid,subjecttype){

    $(".subjectForm").children("table").hide();
    if(subjectid == 1){//数学科目
    if(subjecttype == 1){//单选题
    $("#sxdxOrzzdx").show();
    }else if(subjecttype == 2){//填空题
    $("#sxtk").show();
    }else if(subjecttype == 3||subjecttype==13){//解答题
    $("#sxjd").show();
    }
    }else if(subjectid == 2){//政治科目
    if(subjecttype == 1){//单选题
    $("#sxdxOrzzdx").show();
    }else if(subjecttype == 4){//多题
    $("#zzdx").show();
    }else if(subjecttype == 5){//材料题
    $("#zzcl").show();
    }
    }else if(subjectid == 3){
    console.log(0);
    if(subjecttype == 1){//单选题
    $("#sxdxOrzzdx").show();
    }else if(subjecttype == 6){//完型题
    $("#yywx").show();
    }else if(subjecttype == 7){//阅读题
    $("#yyyd").show();
    }else if(subjecttype == 8){//7选5
    $("#yyqxw").show();
    }else if(subjecttype == 9){//翻译题
    $("#yyfy").show();
    }else if(subjecttype == 10){//排序题
    $("#yypx").show();
    }else if(subjecttype == 11 ||subjecttype == 12){//小作文题
    $("#yyzw").show();
    }
    }
    }
    $("body").on("click",".addOption",function(){
    var this_dom = $(this).parents("tbody.opentAll")
    var opentlength = this_dom.children("tr").length-1;
    if(opentlength == 7){
    $.messager.confirm("确认", "选项超出创建范围", function (r) {});
    return;
    }
    var opentsignlist = 'ABCDEFGH';
    var opentsign = opentsignlist.substr(opentlength,1);
    var html = "<tr>"+
    "<td align='right'>"+opentsign+"：</td>"+
    "<td><div class='xx_121_content option'></div></td>"+
    "</tr>";
    this_dom.children("tr").eq(opentlength).before(html);
    });

    //政治材料题-添加问题
    $(".addPolQuestion").click(function(){
    var this_dom = $(this).parents("tbody.opentAll")
    var opentlength = this_dom.children("tr").length-1;
    var opentsign = opentlength+1;
    var html = "<tr>"+
    "<td align='right'>（"+(opentsign)+"）：</td>"+
    "<td><div class='xx_121_content question'></div></td>"+
    "</tr>";
    this_dom.children("tr").eq(opentlength).before(html);
    });
    //政治材料题-添加答案
    $(".addPolOption").click(function(){
    var this_dom = $(this).parents("tbody.opentAll")
    var opentlength = this_dom.children("tr").length-1;
    var opentsign = opentlength+1;
    var html = "<tr>"+
    "<td align='right'>（"+(opentsign)+"）：</td>"+
    "<td><div class='xx_121_content answer'></div></td>"+
    "</tr>";
    this_dom.children("tr").eq(opentlength).before(html);
    });

    $(".addAnswerGroup").click(function(){//英语完型，添加问题组

    var this_dom = $(this).parents("tbody.answerAll")
    var opentlength = (this_dom.children("tr").length);
    var html = "<tr class='yywxwt0'>"+
    "				    						<td align='right'>（"+opentlength+"）：</td>"+
    "				    						<td class='yywxwt1'>"+
        "				    							<table class='yywxwt2' border='0' cellspacing='' cellpadding='5' width='100%'>"+
            "							    					<tbody class='opentAll'>"+
            "								    					<tr>"+
                "								    						<td align='right' width='10%'>A：</td>"+
                "								    						<td><div class='xx_121_content option'></div></td>"+
                "								    					</tr>"+
            "								    					<tr>"+
                "								    						<td></td>"+
                "								    						<td>"+
                    "								    							<a href='javascript:void(0)' class='btn_121_addBtn addEnglishOption'>添加选项</a>"+
                    "								    						</td>"+
                "								    					</tr>"+
            "														<tr>"+
                "								    						<td align='right'>答案：</td>"+
                "								    						<td><input class='answerInput' onkeyup='this.value=this.value.toUpperCase()' maxlength='1' /></td>"+
                "								    					</tr>"+
            "							    					</tbody>"+
            "							    				</table>"+
        "				    						</td>"+
    "				    					</tr>";
    this_dom.children("tr").eq(opentlength-1).before(html);
    })

    $(".addReadGroup").click(function(){//英语阅读题，添加选项组

    var this_dom = $(this).parents("tbody.readAll")
    var opentlength = (this_dom.children("tr").length);
    var opentlengthStr = parseInt(((opentlength-1)/2))+1;
    var html = "<tr>"+
    "				    						<td align='right'>（"+opentlengthStr+"）：</td>"+
    "				    						<td class='yyyd_xx_outer'><div class='xx_121_content question'></div></td>"+
    "				    					</tr>"+
    "				    					<tr>"+
    "				    						<td></td>"+
    "				    						<td>"+
        "				    							<table border='0' cellspacing='' cellpadding='5' width='100%'>"+
            "							    					<tbody class='opentAll'>"+
            "								    					<tr>"+
                "								    						<td align='right' width='10%'>A：</td>"+
                "								    						<td class='yyyd_xx_inner'><div class='xx_121_content option'></div></td>"+
                "								    					</tr>"+
            "								    					<tr>"+
                "								    						<td></td>"+
                "								    						<td>"+
                    "								    							<a href='javascript:void(0)' class='btn_121_addBtn addEnglishOptiony'>添加选项</a>"+
                    "								    						</td>"+
                "								    					</tr>"+
            "														<tr>"+
                "								    						<td align='right'>答案：</td>"+
                "								    						<td><input class='answerInput' onkeyup='this.value=this.value.toUpperCase()' maxlength='1' /></td>"+
                "								    					</tr>"+
            "								    					<td align='right'>解析：</td>"+
            "								    						<td><div class='xx_121_content analysis'></div></td>"+
            "								    					</tr>"+
            "							    					</tbody>"+
            "							    				</table>"+
        "				    						</td>"+
    "				    					</tr>";
    this_dom.children("tr").eq(opentlength-1).before(html);
    })

    $(".addAnalysis").click(function(){//英语完型添加解析
    var this_dom = $(this).parents(".analysistr");
    var length = this_dom.children("tr").length;
    var html = "<tr>"+
    "<td width=\"10%\" align=\"right\">"+
        "（"+length+"）："+
        "</td>"+
    "<td>"+
        "<div style='width:700px;'class='xx_121_content analysis'></div>"+
        "</td>"+
    "</tr>";
    this_dom.children("tr").eq(length-1).before(html);
    });
    // 英语7选5 添加答案
    $(".addAnswer").click(function(){
    var this_dom = $(this).parents(".answerAll");
    var length = this_dom.children("tr").length;
    var html = "<tr>"+
    "<td width=\"10%\" align=\"right\">"+
        "（"+length+"）："+
        "</td>"+
    "<td>"+
        "<div style='width:700px;'class='xx_121_content answer'></div>"+
        "</td>"+
    "</tr>";
    this_dom.children("tr").eq(length-1).before(html);
    });
    $("body").on("click",".addEnglishOption",function(){//英语完型，英语阅读里的问题添加选项
    var this_dom = $(this).parents("tbody.opentAll")
    var opentlength = this_dom.children("tr").length-1;
    if(opentlength == 7){
    $.messager.confirm("确认", "选项超出创建范围", function (r) {});
    return;
    }
    var opentsignlist = 'ABCDEFGH';
    var opentsign = opentsignlist.substr(opentlength-1,1);
    var html = "<tr>"+
    "<td align='right'>"+opentsign+"：</td>"+
    "<td><div class='xx_121_content option'></div></td>"+
    "</tr>";
    this_dom.children("tr").eq(opentlength-1).before(html);
    })
    ;
    $("body").on("click",".addEnglishOptiony",function(){//英语阅读里的问题添加选项
    console.log(1)
    var this_dom = $(this).parents("tbody.opentAll")
    var opentlength = this_dom.children("tr").length-2;
    if(opentlength == 7){
    $.messager.confirm("确认", "选项超出创建范围", function (r) {});
    return;
    }
    var opentsignlist = 'ABCDEFGH';
    var opentsign = opentsignlist.substr(opentlength-1,1);
    var html = "<tr>"+
    "<td align=\"right\">"+opentsign+"：</td>"+
    "<td><div class=\"xx_121_content option\"></div></td>"+
    "</tr>";
    this_dom.children("tr").eq(opentlength-1).before(html);
    });
</script>
